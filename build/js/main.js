!function(){var e={};this.tmpl=function o(r,t){var i=/\W/.test(r)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+r.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[r]=e[r]||o(document.getElementById(r).innerHTML);return t?i(t):i}}();var discoverStub={images:[{imageurl:"images/discover1.png",word:"Sport"},{imageurl:"images/discover2.png",word:"Wellnes"},{imageurl:"images/discover3.png",word:"Extreme Sports"},{imageurl:"images/discover4.png",word:"Games"},{imageurl:"images/discover5.png",word:"Culture"},{imageurl:"images/discover6.png",word:"Relaxation"},{imageurl:"images/discover7.png",word:"Travelling"}]};$(function(e){function o(o){function r(o){"failed"===o.status&&(o=discoverStub);var r=e("#grid__template").html(),t=tmpl(r,{data:o.images});e(".grid").remove(),e(".discover .width-wrapper").append(t),e(".grid").isotope({itemSelector:".tile",layoutMode:"masonry",masonry:{gutter:20}})}var o="undefined"!=typeof o?o:"";e.ajax({type:"GET",url:"http://api.pixplorer.co.uk/image?word="+o+"&amount=7&size=m",dataType:"json",cache:!1,success:function(e){r(e)},error:function(){r(discoverStub)}})}e(".jcarousel").jcarousel({animation:"slow",wrap:"circular",auto:2,scroll:1}).jcarouselAutoscroll({interval:4e3,target:"+=1",autostart:!0}),e(".jcarousel-control-prev").on("jcarouselcontrol:active",function(){e(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){e(this).addClass("inactive")}).jcarouselControl({target:"-=1"}),e(".jcarousel-control-next").on("jcarouselcontrol:active",function(){e(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){e(this).addClass("inactive")}).jcarouselControl({target:"+=1"}),e.support.cors=!0,e(".button--search").on("click",function(r){r.preventDefault(),r.stopPropagation();var t=e(".search__input");return o(encodeURIComponent(t.val())),t.val(""),!1}),o()}(jQuery));